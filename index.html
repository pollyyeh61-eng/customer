<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HOLY HAIR | å¥¢è¯åå–®ç®¡ç†</title>
    <style>
        :root {
            --gold-gradient: linear-gradient(135deg, #BF953F, #FCF6BA, #B38728, #FBF5B7, #AA771C);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --gold: #D4AF37;
            --bg-dark: #050505;
        }

        body {
            font-family: 'PingFang TC', sans-serif;
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at top right, #1a150a, transparent);
            color: #fff;
            margin: 0;
            padding-bottom: 90px;
        }

        /* é‡‘å±¬æ¼¸å±¤å­—é«” */
        .metallic-text {
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            text-transform: uppercase;
        }

        .header { text-align: center; padding: 40px 20px; }
        .header h1 { font-size: 36px; letter-spacing: 4px; margin: 0; }

        /* æ¯›ç»ç’ƒå¡ç‰‡ */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 25px;
            margin: 0 20px 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        /* è¼¸å…¥æ¡†è¨­è¨ˆ */
        .form-group { margin-bottom: 20px; }
        label { color: #888; font-size: 12px; letter-spacing: 2px; margin-bottom: 8px; display: block; }
        
        input, select, textarea {
            width: 100%;
            padding: 16px;
            background: rgba(0,0,0,0.3);
            border: 1px solid #333;
            border-radius: 12px;
            color: #f0e68c;
            font-size: 16px;
            transition: 0.3s;
            box-sizing: border-box;
        }
        input:focus { border-color: var(--gold); outline: none; background: rgba(212, 175, 55, 0.05); }

        /* æ™ºèƒ½ç•™è¨€æŒ‰éˆ•ï¼šé‡‘å…‰æç¤º */
        .btn-submit {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: bold;
            background: #222;
            color: #666;
            cursor: pointer;
            transition: all 0.5s;
        }

        /* ç•¶å‚™è¨»æœ‰å…§å®¹æ™‚çš„å‹•æ…‹é‡‘å…‰ (has-comment) */
        .btn-submit.has-comment {
            background: var(--gold-gradient);
            color: #000;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
            animation: pulse-gold 2s infinite;
        }

        @keyframes pulse-gold {
            0% { box-shadow: 0 0 10px rgba(212, 175, 55, 0.5); }
            50% { box-shadow: 0 0 25px rgba(212, 175, 55, 0.9); }
            100% { box-shadow: 0 0 10px rgba(212, 175, 55, 0.5); }
        }

        /* åˆ—è¡¨æ¨£å¼ */
        .list-item {
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            padding: 18px;
            margin-bottom: 12px;
            border-left: 3px solid var(--gold);
        }
        .actions { display: flex; gap: 10px; margin-top: 15px; }
        .btn-action { flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #444; background: none; color: #ccc; font-size: 13px; }
        .btn-delete { color: #ff6b6b; border-color: #522; }

        /* åº•éƒ¨å°è¦½ */
        .nav { position: fixed; bottom: 0; width: 100%; height: 70px; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); display: flex; border-top: 1px solid #222; }
        .nav-link { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #444; text-decoration: none; font-size: 11px; }
        .nav-link.active { color: var(--gold); }
        .nav-icon { font-size: 22px; }
    </style>
</head>
<body>

    <div id="view-input" class="page">
        <div class="header">
            <h1 class="metallic-text">Holy Hair</h1>
            <p style="color: #666; font-size: 10px; letter-spacing: 3px;">è‡³ è‡» è²´ è³“ ç³» çµ±</p>
        </div>

        <div class="glass-card">
            <div class="form-group">
                <label>è²´è³“å§“å</label>
                <input type="text" id="name" oninput="autoSaveTemp()">
            </div>
            <div class="form-group">
                <label>è¯ç¹«é›»è©±</label>
                <input type="tel" id="phone" oninput="autoSaveTemp()">
            </div>
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <div style="flex: 1;">
                    <label>è¡€å‹</label>
                    <select id="blood" oninput="autoSaveTemp()">
                        <option>A å‹</option><option>B å‹</option><option>O å‹</option><option>AB å‹</option>
                    </select>
                </div>
                <div style="flex: 1;">
                    <label>æ˜Ÿåº§</label>
                    <select id="constellation" oninput="autoSaveTemp()">
                        <option>ç‰¡ç¾Šåº§</option><option>é‡‘ç‰›åº§</option><option>é›™å­åº§</option><option>å·¨èŸ¹åº§</option>
                        <option>ç…å­åº§</option><option>è™•å¥³åº§</option><option>å¤©ç§¤åº§</option><option>å¤©è åº§</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label>é ç´„æ™‚é–“èˆ‡é …ç›®</label>
                <input type="datetime-local" id="nextTime" oninput="autoSaveTemp()" style="margin-bottom: 10px;">
                <input type="text" id="nextItem" placeholder="é ç´„é …ç›®..." oninput="autoSaveTemp()">
            </div>
            <div class="form-group">
                <label>å¿ƒå¾—å‚™è¨»</label>
                <textarea id="note" rows="3" placeholder="è«‹åœ¨æ­¤è¼¸å…¥å…§å®¹..." oninput="handleNoteInput()"></textarea>
            </div>
            <button id="submitBtn" class="btn-submit" onclick="confirmSave()">å„²å­˜è³‡æ–™</button>
        </div>
    </div>

    <div id="view-list" class="page" style="display: none;">
        <div class="header">
            <h1 class="metallic-text" style="font-size: 24px;">VIP List</h1>
        </div>
        <div style="padding: 0 20px 15px;">
            <input type="text" id="search" placeholder="æœå°‹å§“åæˆ–é›»è©±..." oninput="renderList()" style="border-radius: 30px; background: rgba(255,255,255,0.05);">
        </div>
        <div id="list-container" style="padding: 0 20px;"></div>
    </div>

    <div class="nav">
        <a href="javascript:void(0)" class="nav-link active" onclick="showPage('input', this)">
            <span class="nav-icon">ğŸ’</span><span>ç™»è¨˜</span>
        </a>
        <a href="javascript:void(0)" class="nav-link" onclick="showPage('list', this)">
            <span class="nav-icon">ğŸ“œ</span><span>åå–®</span>
        </a>
    </div>

    <script>
        let db = JSON.parse(localStorage.getItem('holy_hair_v3')) || [];
        let editingId = null;

        // åˆå§‹åŒ–ï¼šè¼‰å…¥æœªå®Œæˆçš„æš«å­˜å…§å®¹
        window.onload = () => {
            const temp = JSON.parse(localStorage.getItem('temp_draft'));
            if(temp) {
                Object.keys(temp).forEach(key => {
                    const el = document.getElementById(key);
                    if(el) el.value = temp[key];
                });
                handleNoteInput();
            }
        };

        // è‡ªå‹•æš«å­˜
        function autoSaveTemp() {
            const draft = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                blood: document.getElementById('blood').value,
                constellation: document.getElementById('constellation').value,
                nextTime: document.getElementById('nextTime').value,
                nextItem: document.getElementById('nextItem').value,
                note: document.getElementById('note').value
            };
            localStorage.setItem('temp_draft', JSON.stringify(draft));
        }

        // ç•™è¨€å€åµæ¸¬
        function handleNoteInput() {
            const noteValue = document.getElementById('note').value;
            const btn = document.getElementById('submitBtn');
            if(noteValue.trim().length > 0) {
                btn.classList.add('has-comment');
            } else {
                btn.classList.remove('has-comment');
            }
            autoSaveTemp();
        }

        // é é¢åˆ‡æ›
        function showPage(page, el) {
            document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
            document.getElementById('view-' + page).style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
            if(page === 'list') renderList();
        }

        // å„²å­˜é‚è¼¯
        function confirmSave() {
            const name = document.getElementById('name').value;
            if(!name) return alert('è«‹è¼¸å…¥è²´è³“å§“å');

            const entry = {
                id: editingId || Date.now(),
                name,
                phone: document.getElementById('phone').value,
                blood: document.getElementById('blood').value,
                constellation: document.getElementById('constellation').value,
                nextTime: document.getElementById('nextTime').value,
                nextItem: document.getElementById('nextItem').value,
                note: document.getElementById('note').value,
                time: new Date().toLocaleString()
            };

            if(editingId) {
                const index = db.findIndex(i => i.id === editingId);
                db[index] = entry;
                editingId = null;
            } else {
                db.unshift(entry);
            }

            localStorage.setItem('holy_hair_v3', JSON.stringify(db));
            localStorage.removeItem('temp_draft');
            alert('è³‡æ–™å·²åŒæ­¥åŠ å¯†å„²å­˜');
            location.reload();
        }

        // æ¸²æŸ“åå–®
        function renderList() {
            const search = document.getElementById('search').value.toLowerCase();
            const container = document.getElementById('list-container');
            const filtered = db.filter(i => i.name.toLowerCase().includes(search) || i.phone.includes(search));
            
            container.innerHTML = filtered.map(i => `
                <div class="list-item">
                    <div style="color:var(--gold); font-weight:bold; font-size:18px;">${i.name}</div>
                    <div style="font-size:13px; color:#888; margin:5px 0;">ğŸ“± ${i.phone} | ${i.constellation}</div>
                    <div style="font-size:12px; color:#aaa;">ğŸ“ å‚™è¨»ï¼š${i.note || 'ç„¡'}</div>
                    <div class="actions">
                        <button class="btn-action" onclick="editItem(${i.id})">ä¿®æ­£</button>
                        <button class="btn-action btn-delete" onclick="deleteItem(${i.id})">åˆªé™¤</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteItem(id) {
            if(confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†å°Šè²´çš„è³‡æ–™å—ï¼Ÿ')) {
                db = db.filter(i => i.id !== id);
                localStorage.setItem('holy_hair_v3', JSON.stringify(db));
                renderList();
            }
        }

        function editItem(id) {
            const item = db.find(i => i.id === id);
            editingId = id;
            document.getElementById('name').value = item.name;
            document.getElementById('phone').value = item.phone;
            document.getElementById('note').value = item.note;
            document.getElementById('nextTime').value = item.nextTime;
            document.getElementById('nextItem').value = item.nextItem;
            showPage('input', document.querySelector('.nav-link'));
            handleNoteInput();
        }
    </script>
</body>
</html>
